
// this TODO file has tasked marked as (now) (soon) (later) from more urgent to less
// done tasks should be marked as (done) for review before I delete them

Loading bar :

Sites :
(later) there could be a "subdivide" button that splits each existing site in subregions (eg draws center to edges lines).
(later) anything snapped to sites should move along with them when moved or resnapped to closer site when regenerated
(soon) when making voronoi, sometimes in rare cases overlapping polygons appear (eg polygon vertex is inside the neighbor polygon)

Elevation :
(later) use techtonic logic in addition to perlin
(later) extend water slider range so we can completely make water disappear or fill the whole screen
(soon) new button : make plateaux (take one cell, extend to neighbor then neighbor etc n times, lerp all cells by 0.5 to the average value, repeat whole thing m times) n=number of cells/1000, m=number of cells/100

Biomes :
(soon) use selectable generation method for "generate" button
        - propagation : what "generate" currently is
        - reset : what "reset" currently is
        - fill gaps : what "fill gaps" currently is
        - fill underwater : what "fill underwater" currently is
        - extend : propagate zones made of the currently selected biome a little
        - shrink : shrink zones made of the currently selected biome a little (replace cells by biom of the closest placed biome if any)
        - spots : place one cell of the currently selected biome (preferably replacing another biome) and propagate it a little
        - vary : start from existing zones and propagate them all on each other a little
        - mountains : place current biome above a certain threshold of elevation
        - beaches : place a current biome right on a coastline, place a few other following the coastline, then propagate this new zone a little
        - full : propagation, rocks -> fill underwater, forest -> spots, (with gradual threshold) rocks snow magma -> mountains, sand -> beaches, vary

Zones :
(later) options to allow overlapping or not (two groups? allowed / not-allowed)
(later) remove/reserve water from zones
(later) small zones isolated artifacts
(later) make zone display look somehow better
(later) button : exclude water
(later) button : make exclusive
(later) button : set four-color map coloring

Paths :
(later) width definer similar to water but using pathfinding to define more important roads
(later) taping sometimes wrong (probably needs doubly connected edges and propagation done right)
(later) option to generate paths
(soon) when switchg path type on the left menu, desselect the path (on the right menu)
(later) option to have the color match with water

Structures :
(later) structures should be groupable
(later) structure should snap to zones
(later) option to generate structs
(later) a way to move already placed structs
(later) refine the way parameters work (UI, default, selected, etc)
(later) structures light shading on rendering mode
(later) crosses (as on treasure maps)

Labels :
(later) optionally associate labels with map elements
(later) have type presets for label styles (like with path types)
(later) option to generate labels
(later) find a way to allow for labels text fill color and outline color, also parameters for font used (just a few typical options)
(later) text size should be handled better (typo appears blurry)

Rendering :
(later) elevation lightning could feel more gradient-like or dither-like rather than just unified polygons (find examples of this)
(later) LOD rules: hide/show groups vs members depending on zoom, optional merging visually of dense structures.
(later) Rendering/exporting the legend for reference.
(later) take inspiration from real map pictures (eg ign maps)
(later) add loading bars for long operations (contours)
(later) some ugly dots sometimes appear between polygones
(later) labels outline don't work well
(later) ripple lines are approximative, so either we optimize them or we make tem display below lands
(later) reliable method when two outlines share the same border (always distinct, makes sense, line weight into account) and use it for biomes outlines and zones outlines (define segment edges normals, spread segments along it n times = number of borders that share it, based on : which side of it, smaller regions inside big ones)
(later) choosing biomes "pattern" option yields "The file patterns/dots01.png contains bad image data, or may not be an image." while file is seems ok.
(later) contour lines (or other computationally intensive tasks) should trigger a progress bar and be made to not freeze the rest of the ui (like we did for cell placements and voronoi).
(later) labels are wrong in many ways, rework no this
(later) changing preset should trigger computation of required features such as contour lines if needed
(later) a "save preset" button
(later) water contour lines distance should be zoom-dependant
(later) water contour lines should have a starting and ending alpha
(later) make sure water contour lines never cross actual coastline
 
Export :
(later) Comments exportable as custom format
(later) JSON export/import (human-readable) with legend, layers, cells, paths, structures, groups, labels, view defaults.
(later) SVG export with layers (background, borders, paths, structures, labels, legend) and data-* / class attributes for type ids.
(later) are there existing formats for such tools to handle?
(later) trying to export with labels makes the thing crash with a NullPointerException
(later) path rendering slightly differ from their rendering in rendering mode (should be similar)

Editable types :
(later) Visually show which parameters "belong" to a type or to a more general part of the interface.

General :
(later) investigate caching options
(later) option to generate details (about everything) for zooming
(later) Refactor, optimize etc.
(later) remove comments specific to explain a single commit, add general purpose comments instead
(later) remove obsolete debug prints
(later) undo states
(later) rgbToHSB seems to be part of the model class while hsb01ToRGB isnt, also why "01"? can we add more clarity to all this?
(later) what's the use of passing "PApplet app" as a reference when methods could be called directly?
(later) the way ui elements are stored should be a box containing the labels as well, not having the labels partially above it (eg see how HSB sliders are inserted in the layout)
(later) revise UI element visual design, stil in an "old windows" way
(later) write a more consistent readme file
(later) a "fully generate" button once all generate methods have been implemented
